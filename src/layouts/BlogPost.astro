---
import '../styles/global.css';
import type { CollectionEntry } from 'astro:content';
import BaseHead from '../components/BaseHead.astro';
import CopyCodeButton from '../components/CopyCodeButton.astro';
import Footer from '../components/Footer.astro';
import FormattedDate from '../components/FormattedDate.astro';
import Header from '../components/Header.astro';
import Analytics from '@vercel/analytics/astro';

type Props = CollectionEntry<'blog'>['data'];

const { title, description, pubDate, updatedDate } = Astro.props;
---

<html lang="en">
	<head>
		<BaseHead title={title} description={description} />
		<script type="application/ld+json" set:html={JSON.stringify({
			"@context": "https://schema.org",
			"@type": "BlogPosting",
			"headline": title,
			"description": description,
			"datePublished": pubDate.toISOString(),
			"dateModified": (updatedDate || pubDate).toISOString()
		})} />
	</head>

	<body>
		<Header />
		<main class="mx-auto lg:w-5/8 px-6 py-10 flex items-center justify-center">
			<article class="space-y-8 w-full">
				<!-- Post Header -->
				<header class="space-y-2">
					<h1 class="text-3xl font-bold">{title}</h1>
					<div class="text-sm text-muted-foreground">
						<FormattedDate date={pubDate} />
						{updatedDate && (
							<span class="ml-2 italic">
								(Updated: <FormattedDate date={updatedDate} />)
							</span>
						)}
					</div>
					<Analytics />
				</header>

				<!-- Post Body -->
				<div class="prose">
					<slot />
				</div>
			</article>
		</main>
		<Footer />
		<CopyCodeButton />
	</body>
</html>
